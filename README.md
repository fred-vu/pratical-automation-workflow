# n8n-automation

## Workflows

### Generate Sora Video from Notion Prompt

This repository contains an n8n workflow located at [`workflows/sora_video_workflow.json`](workflows/sora_video_workflow.json) that automates video generation with OpenAI's `sora-2` model. The flow performs the following high-level steps:

1. **Fetch Prompt** – Queries a Notion database for entries marked with the `Ready` status and extracts the prompt text.
2. **Request Video Generation** – Sends the prompt to OpenAI via an HTTP Request node, asking `sora-2` to create a video and specifying a callback webhook generated by the workflow.
3. **Wait for Completion** – Uses a Wait node configured for webhook mode to pause execution until OpenAI calls back with the finished video metadata.
4. **Download & Store** – Downloads the rendered video and uploads it to Google Drive.
5. **Update Notion** – Marks the originating Notion record as `Completed` and stores a link to the uploaded asset.

### Required configuration

- **Notion** – Provide a Notion credential named `Notion account` and set the `NOTION_PROMPT_DATABASE` environment variable to the database ID that stores prompt records. Prompts must be stored in a rich text property named `Prompt`, and the database should expose `Status` (Status type) and `Video URL` (URL type) properties.
- **OpenAI** – Configure an HTTP Header Auth credential named `OpenAI API Key` with `Authorization: Bearer <token>` to authenticate requests to the video generation endpoint.
- **Google Drive** – Supply a Google Drive OAuth credential named `Drive Service Account`, or adjust the node to match your credential name. Update the node's `parents` parameter with the target folder ID where videos should be stored.
- **Webhook exposure** – Ensure the n8n instance is accessible at the callback URL provided by the Wait node so that OpenAI can notify the workflow when rendering completes.

Import the workflow into your n8n instance to adapt the filter conditions, payload parameters, and storage targets as needed for your environment.
